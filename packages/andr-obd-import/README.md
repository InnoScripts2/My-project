# AndrOBD Import Staging

Эта директория служит промежуточным хранилищем исходников AndrOBD, которые мы переносим для анализа и поэтапной миграции в TypeScript.

## Структура

- `library/` — Java-библиотека (`com.fr3ts0n.ecu.*`, `prot`, `pvs`) с основной логикой протоколов ELM327, декодированием PID/DTC и вспомогательными утилитами.
- `androbd/` — Android-приложение (Activity, Service, layout и drawable ресурсы) с UI, Bluetooth/USB сервисами и локализациями.
- `plugin/` — пустая директория в оригинальном репозитории (оставлена для совместимости).
- `oran/` — placeholder под сторонний модуль (в исходнике содержит только конфигурацию, пока не используется).

### Лицензирование

- В корне исходника лежит `LICENSE` с GPL v3 (2015, fr3ts0n). Все Java-файлы помечены GPL.
- Используем директорию только как материал для анализа. Для продукта требуется полная перепись логики без прямого копирования.

### Ресурсы данных

- `library/src/main/java/com/fr3ts0n/ecu/prot/obd/res/pids.csv` — перечень OBD-II PID с полями формул, форматов, единиц, интервалов обновления.
- `library/src/main/java/com/fr3ts0n/ecu/prot/obd/res/conversions.csv` — преобразования и формулы (формат измерений, функции).
- `library/src/main/java/com/fr3ts0n/ecu/prot/vag/res/vag_pids.csv` и `vag_conversions.csv` — специфичные PID для VAG.
- `customisation/templates/cust_pids.csv` и `cust_conversions.csv` — шаблоны кастомизации для OEM.
- Дополнительные `*.properties` в `ecu/prot/obd/res` описывают текстовые сообщения и статусы.

## Задачи по интеграции

1. Извлечь из `library/` чистые протокольные классы (`prot/obd`, `ecu/prot`, `common/` util) и подготовить их к переписыванию на TypeScript.
2. Идентифицировать справочные данные (`*.csv`, `*.properties`) и перевести в формат JSON/TS Map для использования в Node-среде.
3. Проанализировать зависимости UI-модуля `androbd/`, чтобы исключить Android-специфичный код и оставить только бизнес-логику (работа сервисов, обработка телеграмм).
4. Зафиксировать лицензии (GPL v2+) для компонентов AndrOBD и определить стратегию совместимости с нашим продуктом.
5. Сформировать модуль `packages/@selfservice/obd-andr` со структурой TypeScript и начать перенос ключевых классов (например, `ElmProt`, `ObdProt`, адаптивное время, CAN обработчики).

Документ будем обновлять по мере продвижения миграции.
