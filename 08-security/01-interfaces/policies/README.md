# Security Policies — Политики безопасности

Эта директория содержит базовые образцы и шаблоны политик безопасности для проекта.

## Файлы

### `rls-examples.sql`
Примеры Row Level Security (RLS) политик для защиты данных в Supabase/PostgreSQL:
- Публичные VIEW без персональных данных
- Политики для анонимного доступа
- Политики для service role
- Append-only логирование
- Примеры политик на основе ролей

**Когда использовать:**
- При создании новых таблиц в БД
- При настройке прав доступа
- При аудите безопасности БД

### `env-templates.md`
Шаблоны файлов .env для разных окружений (DEV, QA, PROD):
- Конфигурация для каждого окружения
- Примеры секретов (без реальных значений)
- Комментарии о хранении в vault
- Контрольный список безопасности

**Когда использовать:**
- При развёртывании в новом окружении
- При ротации секретов
- Как reference при настройке переменных

### `csp-headers-examples.md`
Примеры Content Security Policy (CSP) и других заголовков безопасности:
- Настройки для Node.js/Express (Helmet.js)
- HTML meta tags
- Nginx конфигурация
- Различия между DEV и PROD
- Решения распространённых проблем

**Когда использовать:**
- При настройке web-сервера
- При внедрении новых компонентов
- При аудите безопасности frontend/backend

## Принципы применения

1. **Security by Design**: политики должны применяться с самого начала разработки
2. **Principle of Least Privilege**: минимальные права доступа по умолчанию
3. **Defense in Depth**: многоуровневая защита (БД, API, frontend)
4. **Separation of Secrets**: разные секреты для каждого окружения
5. **Regular Audits**: периодическая проверка и обновление политик

## Контрольный список применения

- [ ] RLS включен для всех таблиц с персональными данными
- [ ] .env файлы созданы из шаблонов для всех окружений
- [ ] Production секреты хранятся в secure vault
- [ ] CSP заголовки настроены и протестированы
- [ ] CORS whitelist настроен (не используется *)
- [ ] Rate limiting настроен
- [ ] HTTPS/TLS сертификаты валидны
- [ ] Мониторинг нарушений безопасности активен

## Связанные документы

- `08-security/03-domain/threat-model/` — модель угроз STRIDE
- `08-security/05-tests/` — чеклисты верификации
- `09-docs/01-interfaces/docs-root/tech/CYCLE2_SECURITY_GUIDE.md` — полное руководство
- `10-tools/04-infrastructure/secrets/` — скрипты генерации .env
