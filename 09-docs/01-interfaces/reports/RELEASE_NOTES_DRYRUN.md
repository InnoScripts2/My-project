# Release Notes (Dry Run) ‚Äî –≤–µ—Ä—Å–∏—è 0.1.0

## –û–±–∑–æ—Ä

–≠—Ç–æ –ø–µ—Ä–≤—ã–π –ø—Ä–µ–¥—Ä–µ–ª–∏–∑–Ω—ã–π (dry run) –≤—ã–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã "–ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å —Å–∞–º–æ–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è". –í –¥–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –≤–∫–ª—é—á–µ–Ω—ã –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –∫–∏–æ—Å–∫–∞, **–∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π —Å PSP (–ø–ª–∞—Ç—ë–∂–Ω—ã–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º) –∏ Email/SMS —Å–µ—Ä–≤–∏—Å–∞–º–∏**. –≠—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–µ–ª–∏–∑–µ.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –ø–∏–ª–æ—Ç–Ω–æ–º—É —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é
**–î–∞—Ç–∞:** 2025-01-05
**–í–µ—Ä—Å–∏—è:** 0.1.0-prerelease

---

## ‚úÖ –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ –≤ —ç—Ç–æ—Ç —Ä–µ–ª–∏–∑

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (Supabase)

- ‚úÖ **RLS (Row Level Security) –ø–æ–ª–∏—Ç–∏–∫–∏:** –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç —Ç–æ–ª—å–∫–æ SELECT –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–µ VIEW. –ó–∞–ø–∏—Å—å –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ service role key –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö.
- ‚úÖ **–ü—É–±–ª–∏—á–Ω—ã–µ VIEW –±–µ–∑ PII:** `v_reports_public`, `v_sessions_public`, `v_equipment_status_public` ‚Äî –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç email, phone, customer_id.
- ‚úÖ **–ò–Ω–¥–µ–∫—Å—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è sessions, thickness_points, diagnostics_events, payments, reports.
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ RLS, –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –µ–∂–µ–º–µ—Å—è—á–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞.
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏–∏:** –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ Supabase (`supabase/migrations/`).

### 2. Cloud API (apps/cloud-api)

- ‚úÖ **Production-ready —Å–µ—Ä–≤–∏—Å:** Node.js + TypeScript + Express
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
  - Helmet –¥–ª—è HTTP headers
  - CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ origins (ENV: `CLOUD_API_ALLOWED_ORIGINS`)
  - Rate limiting (100 req/min –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
  - Service role key —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –í—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Zod —Å—Ö–µ–º—ã
- ‚úÖ **–ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –æ–± –æ—à–∏–±–∫–∞—Ö —Å –∫–æ–¥–∞–º–∏, –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –¥–µ—Ç–∞–ª–µ–π –≤ PROD
- ‚úÖ **Observability:**
  - `/health` ‚Äî –±–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∂–∏–≤–æ—Å—Ç–∏
  - `/readiness` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ Supabase —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
  - `/metrics` ‚Äî Prometheus –º–µ—Ç—Ä–∏–∫–∏ (HTTP latency, business operations)
- ‚úÖ **Docker:** Dockerfile —Å non-root user –∏ healthcheck
- ‚úÖ **–¢–µ—Å—Ç—ã:** 22 —Ç–µ—Å—Ç–∞ (smoke tests, validation, error handling)

**Endpoints:**
- `POST /api/sessions` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏
- `GET /api/sessions/:id` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–∏
- `POST /api/sessions/:id/finish` ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
- `POST /api/thk/points` ‚Äî –∑–∞–ø–∏—Å—å —Ç–æ—á–µ–∫ —Ç–æ–ª—â–∏–Ω–æ–º–µ—Ç—Ä–∞
- `POST /api/diag/events` ‚Äî –∑–∞–ø–∏—Å—å —Å–æ–±—ã—Ç–∏–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- `POST /api/reports` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞
- `POST /api/payments/intent` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç—ë–∂–Ω–æ–≥–æ –Ω–∞–º–µ—Ä–µ–Ω–∏—è
- `GET /api/payments/:id/status` ‚Äî —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞
- `POST /api/payments/:id/confirm-dev` (DEV only) ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ –≤ DEV
- `POST /api/equipment/status` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

### 3. Kiosk Agent (apps/kiosk-agent)

- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å:** Node.js + TypeScript, —É–ø—Ä–∞–≤–ª—è–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π
- ‚úÖ **Persistence modes:**
  - `memory` ‚Äî InMemoryStore (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
  - `sqlite` ‚Äî –ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î
  - `pg` ‚Äî PostgreSQL
  - `supabase` ‚Äî –æ–±–ª–∞—á–Ω–∞—è –ë–î —á–µ—Ä–µ–∑ SupabaseStore
- ‚úÖ **SupabaseStore —Å —Ä–µ—Ç—Ä–∞—è–º–∏:**
  - –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ ENV)
  - –¢–∞–π–º–∞—É—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–π (10s –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - Prometheus –º–µ—Ç—Ä–∏–∫–∏: `supabase_operations_total`, `supabase_operation_duration_seconds`, `supabase_retries_total`
- ‚úÖ **OBD-II –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
  - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ObdConnectionManager
  - –°–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–∞–ø—Ç–µ—Ä–∞ (SelfCheckLogger)
  - –ß—Ç–µ–Ω–∏–µ DTC (–∫–æ–¥–æ–≤ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π)
  - Clear DTC —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
  - –í–∞–ª–∏–¥–∞—Ü–∏—è payload —á–µ—Ä–µ–∑ `parseObdConnectPayload`
- ‚úÖ **–¢–æ–ª—â–∏–Ω–æ–º–µ—Ç—Ä:**
  - –®–∞–±–ª–æ–Ω—ã —Ç–æ—á–µ–∫ –∏–∑–º–µ—Ä–µ–Ω–∏–π (40-60 —Ç–æ—á–µ–∫)
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å SupabaseStore
  - DEV-–º–µ—Ç–æ–¥ `mark-point` –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤ DEV —Ä–µ–∂–∏–º–µ
- ‚úÖ **–ü–ª–∞—Ç–µ–∂–∏:**
  - –≠–º—É–ª—è—Ü–∏—è –≤ DEV (–∫–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É (DEV)")
  - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≥–æ—Ç–æ–≤—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ PSP
  - TODO –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞
- ‚úÖ **–û—Ç—á—ë—Ç—ã:**
  - –õ–æ–∫–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è HTML
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `reports/outbox/`
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á—ë—Ç–æ–≤
  - TODO –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è Email/SMS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- ‚úÖ **Health checks:**
  - `/health/integrations` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ Supabase –∏ Edge Functions
  - `/health/persistence` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ persistence store
- ‚úÖ **Prometheus –º–µ—Ç—Ä–∏–∫–∏:**
  - Payments, Supabase operations, Device status
  - `/metrics` endpoint

### 4. Frontend (apps/kiosk-frontend)

- ‚úÖ **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π HTML/CSS/JS –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–≤—É—Ö —Ä–µ–∂–∏–º–æ–≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
  - `source=agent` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–π kiosk-agent
  - `source=supabase` (read-only) ‚Äî –ø—Ä—è–º–æ–µ —á—Ç–µ–Ω–∏–µ –∏–∑ Supabase —á–µ—Ä–µ–∑ anon key
- ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ UI:**
  - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (‚öôÔ∏è –∏–ª–∏ Ctrl+Shift+S)
  - –í–≤–æ–¥ Supabase URL –∏ Anon Key
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
- ‚úÖ **–í —Ä–µ–∂–∏–º–µ Supabase:**
  - –î–µ–≤–∞–π—Å–Ω—ã–µ CTA (—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞) –≤—ã–∫–ª—é—á–µ–Ω—ã
  - –î–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —á—Ç–µ–Ω–∏—è
- ‚úÖ **–ê–≤—Ç–æ—Å–±—Ä–æ—Å —Å–µ—Å—Å–∏–∏ –ø–æ —Ç–∞–π–º–∞—É—Ç—É –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- ‚úÖ **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (—á–∞—Å—Ç–∏—á–Ω–æ):**
  - Aria-–º–µ—Ç–∫–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö
  - –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞
  - TODO: —Ñ–æ–∫—É—Å-–ª–æ–≤—É—à–∫–∏ –≤ –º–æ–¥–∞–ª–∫–∞—Ö
- ‚úÖ **–õ–∏–Ω—Ç HTML:** HTMLHint –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫

**–≠–∫—Ä–∞–Ω—ã:**
- –û–∂–∏–¥–∞–Ω–∏–µ (attract screen)
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + —Å–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏
- –í—ã–±–æ—Ä —É—Å–ª—É–≥–∏ (–¢–æ–ª—â–∏–Ω–æ–º–µ—Ç—Ä / –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ OBD-II)
- –í–µ—Ç–∫–∞ –¢–æ–ª—â–∏–Ω–æ–º–µ—Ç—Ä: –≤—ã–±–æ—Ä —Ç–∏–ø–∞ –∞–≤—Ç–æ, –æ–ø–ª–∞—Ç–∞, –∏–∑–º–µ—Ä–µ–Ω–∏—è, –æ—Ç—á—ë—Ç
- –í–µ—Ç–∫–∞ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –≤—ã–±–æ—Ä –∞–≤—Ç–æ, —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, paywall, —Å–±—Ä–æ—Å –æ—à–∏–±–æ–∫, –æ—Ç—á—ë—Ç

### 5. Android WebView –û–±–æ–ª–æ—á–∫–∞ (apps/android-kiosk)

- ‚úÖ **MainActivity.kt:**
  - –î–∏–∞–ª–æ–≥ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Base URL (–¥–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ –ª–æ–≥–æ—Ç–∏–ø)
  - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫ WebView (–Ω–µ —á—ë—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω)
  - –ò–º–º–µ—Ä—Å–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–≤–æ—Ä–æ—Ç–∞
- ‚úÖ **Network Security Config:**
  - DEV: —Ä–∞–∑—Ä–µ—à—ë–Ω cleartext (HTTP)
  - PROD: —Ç–æ–ª—å–∫–æ HTTPS
- ‚úÖ **–ò–∫–æ–Ω–∫–∞, —Ç–µ–º–∞, manifest**
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –∫–∞–∫ —Å–º–µ–Ω–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

### 6. Edge Functions (Supabase)

- ‚úÖ **ai-chat function:**
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –õ–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ IP (–±–∞–∑–æ–≤–∞—è –∑–∞—â–∏—Ç–∞)
  - –¢–∞–π–º–∞—É—Ç –≤–Ω–µ—à–Ω–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ Gemini API
  - CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω —á–µ—Ä–µ–∑ ENV
  - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –æ–± –æ—à–∏–±–∫–∞—Ö

### 7. CI/CD

- ‚úÖ **GitHub Actions workflow:**
  - –õ–∏–Ω—Ç–∏–Ω–≥ (ESLint + HTMLHint)
  - Typecheck strict –¥–ª—è cloud-api
  - –¢–µ—Å—Ç—ã (cloud-api, kiosk-agent)
  - Docker build –¥–ª—è cloud-api
  - Security scan (npm audit, TruffleHog)
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤:** TruffleHog –≤ pipeline
- ‚úÖ **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç:** ‚úÖ

### 8. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ **README.md:** –û–±—â–∏–π –æ–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ **docs/tech/architecture.md:** –î–∏–∞–≥—Ä–∞–º–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, RLS-–º–æ–¥–µ–ª—å, –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **docs/product/flows.md:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ —Ç–µ–∫—Å—Ç—ã —ç–∫—Ä–∞–Ω–æ–≤
- ‚úÖ **docs/internal/runbooks/kiosk-ops.md:** –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π runbook –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- ‚úÖ **supabase/migrations/README.md:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ **apps/cloud-api/README.md, DEPLOYMENT.md:** –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é
- ‚úÖ **apps/cloud-api/Dockerfile:** Production-ready Docker image

---

## ‚ùå –ß—Ç–æ –ù–ï –≤–∫–ª—é—á–µ–Ω–æ (–æ—Ç–ª–æ–∂–µ–Ω–æ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Ä–µ–ª–∏–∑)

### 1. –†–µ–∞–ª—å–Ω—ã–π PSP (Payment Service Provider)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –í DEV –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç–º—É–ª—è—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π (–∫–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É (DEV)")
- –í PROD QR-–∫–æ–¥—ã –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è, –ø–ª–∞—Ç–µ–∂–∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

**–ó–∞–≥–ª—É—à–∫–∏ –≥–æ—Ç–æ–≤—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
- `apps/kiosk-agent/src/payments/module.ts` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `createIntent`, `getStatus`, `confirm`
- TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å –ø–æ–º–µ—Ç–∫–æ–π "PSP integration: follow-up"

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ÆKassa / –°–±–µ—Ä–±–∞–Ω–∫ / Tinkoff / –¥—Ä—É–≥–æ–π PSP
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö QR-–∫–æ–¥–æ–≤

### 2. Email / SMS –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –û—Ç—á—ë—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ `reports/outbox/`
- –í DEV —Å–∏–º—É–ª–∏—Ä—É–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∫–∞ (–ª–æ–≥ –≤ –∫–æ–Ω—Å–æ–ª—å)
- –í PROD —Ä–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ó–∞–≥–ª—É—à–∫–∏ –≥–æ—Ç–æ–≤—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
- `apps/kiosk-agent/src/reports/mailer.ts` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `sendReportEmail`
- `apps/kiosk-agent/src/reports/sms.ts` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `sendSms`
- TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å –ø–æ–º–µ—Ç–∫–æ–π "Email/SMS provider: follow-up"

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SendGrid / Mailgun / –¥—Ä—É–≥–æ–π email provider
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SMS.ru / Twilio / –¥—Ä—É–≥–æ–π SMS provider
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ —Ä–µ—Ç—Ä–∞–∏

### 3. PowerShell —Ç–∞—Å–∫–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (—É–ª—É—á—à–µ–Ω–∏—è)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- `infra/scripts/dev-run.ps1` ‚Äî –±–∞–∑–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ DEV
- `infra/scripts/dev-static.cjs` ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–¥–∞—á–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

**–ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Node.js, npm, ports)
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ –æ–¥–Ω–æ–º –æ–∫–Ω–µ
- –¢–∞—Å–∫–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ cloud-api –ª–æ–∫–∞–ª—å–Ω–æ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å VS Code tasks

### 4. –ü–æ–ª–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (Accessibility)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- Aria-–º–µ—Ç–∫–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö ‚úÖ
- –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞ ‚úÖ
- –§–æ–∫—É—Å-–ª–æ–≤—É—à–∫–∏ –≤ –º–æ–¥–∞–ª–∫–∞—Ö ‚ùå (—á–∞—Å—Ç–∏—á–Ω–æ)
- –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã ‚ùå (—á–∞—Å—Ç–∏—á–Ω–æ)

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:**
- –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (WCAG 2.1 AA)
- –¢–µ—Å—Ç—ã —Å screen readers
- –£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π

---

## üöÄ –ö–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å (Quick Start)

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Windows)

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```powershell
   npm install
   cd apps/cloud-api && npm install
   cd ../kiosk-agent && npm install
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª—ã:**
   ```bash
   # apps/kiosk-agent/.env
   AGENT_ENV=DEV
   AGENT_PERSISTENCE=supabase
   SUPABASE_URL=https://your-project.supabase.co
   SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

   # apps/cloud-api/.env
   NODE_ENV=development
   SUPABASE_URL=https://your-project.supabase.co
   SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
   ```

3. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ Supabase:**
   ```bash
   cd supabase
   supabase link --project-ref your-project-id
   supabase db push
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
   ```powershell
   # Terminal 1: kiosk-agent
   npm --prefix apps/kiosk-agent run dev

   # Terminal 2: frontend
   npm run static

   # Terminal 3 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): cloud-api
   npm --prefix apps/cloud-api run dev
   ```

5. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   - Frontend: `http://localhost:8080`
   - Agent: `http://localhost:7070`
   - Cloud API: `http://localhost:7071`

### Production (Docker)

```bash
# Cloud API
cd apps/cloud-api
docker build -t kiosk-cloud-api:0.1.0 .
docker run -d \
  -p 7071:7071 \
  -e SUPABASE_URL=... \
  -e SUPABASE_SERVICE_ROLE_KEY=... \
  -e NODE_ENV=production \
  --name kiosk-cloud-api \
  kiosk-cloud-api:0.1.0
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –¢–µ—Å—Ç—ã
- **Cloud API:** 22/22 ‚úÖ
- **Kiosk Agent:** 15/15 ‚úÖ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
- **Frontend:** HTMLHint 0 –æ—à–∏–±–æ–∫ ‚úÖ

### –õ–∏–Ω—Ç–∏–Ω–≥
- **ESLint:** 0 warnings ‚úÖ
- **TypeScript strict:** 0 errors ‚úÖ
- **HTMLHint:** 0 errors ‚úÖ

### Security
- **npm audit:** –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π ‚úÖ
- **TruffleHog:** –ù–µ—Ç —É—Ç–µ—á–µ–∫ —Å–µ–∫—Ä–µ—Ç–æ–≤ ‚úÖ
- **RLS policies:** –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã ‚úÖ

### Performance (–±–∞–∑–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏)
- **Supabase latency:** < 200ms (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)
- **HTTP request duration:** < 100ms (–ª–æ–∫–∞–ª—å–Ω–æ)
- **Cloud API response time:** < 500ms (–±–µ–∑ –ë–î)

---

## üîß –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ü–ª–∞—Ç–µ–∂–∏:** –¢–æ–ª—å–∫–æ —ç–º—É–ª—è—Ü–∏—è –≤ DEV. –í PROD –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.
2. **–û—Ç—á—ë—Ç—ã:** –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ email/SMS. –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.
3. **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:** –¢—Ä–µ–±—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è (OBD –∞–¥–∞–ø—Ç–µ—Ä, —Ç–æ–ª—â–∏–Ω–æ–º–µ—Ä).
4. **Android:** –ë–∞–∑–æ–≤–∞—è WebView –æ–±–æ–ª–æ—á–∫–∞, –±–µ–∑ push notifications.
5. **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞.

---

## üìù –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –†–µ–ª–∏–∑ 0.2.0 (–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ PSP (–ÆKassa / –°–±–µ—Ä–±–∞–Ω–∫)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Email/SMS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (WCAG 2.1 AA)
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–µ PowerShell —Ç–∞—Å–∫–∏
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥ (Grafana + AlertManager)
- ‚úÖ E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤
- ‚úÖ –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (–º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å)

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –ø–ª–∞–Ω—ã

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö –º–∞—Ä–æ–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π (–Ω–µ —Ç–æ–ª—å–∫–æ Toyota/Lexus)
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (PID-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM/ERP —Å–∏—Å—Ç–µ–º–∞–º–∏
- –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ (–∏—Å—Ç–æ—Ä–∏—è –æ—Ç—á—ë—Ç–æ–≤)
- AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ DTC –∫–æ–¥–æ–≤ (—É–∂–µ –µ—Å—Ç—å –±–∞–∑–æ–≤–æ)

---

## üí¨ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

–ï—Å–ª–∏ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –±–∞–≥ –∏–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é:
- [–°–æ–∑–¥–∞–π—Ç–µ Issue](https://github.com/InnoScripts2/my-own-service/issues/new)
- Email: support@example.com
- Slack: #kiosk-feedback (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–∞–Ω–∞–ª)

---

**–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã "–ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å —Å–∞–º–æ–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è"!**

*–ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏*
