# Резервирование: электропитание киоска

## Цель

Обеспечить непрерывную работу терминала при сбоях электросети.

## Архитектура питания

- Основная цепь: сеть 220 В → стабилизатор → распределительный блок киоска.
- Резервная цепь: онлайн-ИБП (10-15 минут) + аккумуляторный модуль (до 4 часов).
- Расширенный резерв: портативный генератор с автоматическим запуском.

## План переключения

1. **Отслеживание**
   - Установить датчик напряжения, публикующий события в агент (`/power/status`).
   - При падении напряжения ниже порога инициировать сценарий `POWER_FAIL_WARNING`.

2. **Переход на ИБП**
   - ИБП автоматически принимает нагрузку; агент фиксирует событие в `logs/power.log`.
   - Ограничить энергоёмкие операции (например, отключить подогрев замка).

3. **Подключение аккумуляторного модуля**
   - Если отключение длится >5 минут, автоматически активировать DC-инвертор.
   - Отправить уведомление оператору с расчётным временем автономии.

4. **Запуск генератора (при наличии)**
   - После 30 минут отключения предложить оператору запустить генератор.
   - При успешном запуске переключить нагрузку и синхронизировать состояние.

## Восстановление сети

- После возвращения напряжения выполнить тестовую нагрузку.
- Провести диагностику ИБП (уровень заряда, журнал ошибок).
- Пополнить расходные материалы (топливо генератора, состояние аккумуляторов).

## Требуемые задачи

- Добавить модуль мониторинга питания в `apps/kiosk-agent` (`PowerStatusService`).
- Описать регламент обслуживания ИБП и аккумуляторов в `docs/internal/training/maintenance/`.
- Подготовить signage для клиентов о временной недоступности услуг при работе на резерве.
