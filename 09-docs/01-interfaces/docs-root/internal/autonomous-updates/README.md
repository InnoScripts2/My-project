# План автономных внутренних обновлений

Документ описывает внутренний цикл обслуживания проекта без изменения пользовательского контента и сценариев киоска. Цель — поддерживать кодовую базу, инфраструктуру и инструменты в актуальном состоянии, обеспечивая надёжность и готовность к дальнейшим интеграциям.

## 1. Реестр компонентов и зон ответственности

| Компонент | Расположение | Назначение | Периметр внутренних обновлений |
| --- | --- | --- | --- |
| Frontend (киоск) | `apps/kiosk-frontend/` | Одностраничный интерфейс терминала | Линтеры, статический анализ, мониторинг зависимостей, документация по UI-архитектуре |
| Локальный агент | `apps/kiosk-agent/` | Взаимодействие с устройствами, платежами, замками | Логирование, обработка ошибок, конфигурация dev/qa/prod, тестовые сценарии без изменения бизнес-потока |
| Устройство OBD | `packages/device-obd/` | Драйвер общения с адаптером ELM327 | Диагностика соединения, покрытие тестами, защита от таймаутов |
| Устройство толщиномера | `packages/device-thickness/` | Подключение к толщиномеру | Контроль ошибок SDK, рекорд лога соединения, обновление интерфейсов |
| Генерация отчётов | `packages/report/` | Формирование финальных материалов (PDF/HTML) | Функциональные тесты, оптимизация шаблонов, проверка локализации |
| Платежи | `packages/payments/` | Абстракция провайдеров | Обновление API-адаптеров, безопасность хранения ключей |
| Скрипты инфраструктуры | `infra/scripts/` | Автоматизация запуска, хуки, сборки | Журналы выполнения, проверка прав доступа, оптимизация CI/CD |
| Документация | `docs/` | Полная история решений и инструкций | Согласование инструкций, хранение журналов, регулярные обзоры |
| Инфраструктура киоска | `infra/kiosk/` | Конфигурации ОС, политики автозапуска, безопасность среды | Профили киоска, обновление политик безопасности, контроль версий Windows |
| Скрипты автоматизации | `infra/scripts/` | Утилиты развертывания, обслуживания и диагностики | Поддержка PowerShell/Node-скриптов, обновление зависимостей, тестирование сценариев восстановления |
| Мониторинг и телеметрия | `infra/monitoring/` | Конфигурации систем наблюдаемости, трассировки, алертов | Настройка дашбордов, проверка триггеров, документирование KPI |
| Обучающие материалы | `docs/internal/training/` | Руководства и тренинги для внутренней команды | Обновление учебных планов, хранение записей, FAQ |

## 2. Бэклог внутренних задач

> Все пункты касаются только внутренней устойчивости и не меняют пользовательский UX.

1. **Укрепить контроль зависимостей**
   - Обновить `npm outdated` список, добавить отчёт в `docs/internal/autonomous-updates/log.md`.
   - Настроить ежемесячный скрипт проверки безопасности (`npm audit --production`).
   - Подготовить регламент ручного реагирования на критичные уязвимости (временные патчи, откат версий).
   - Составить карту критичности зависимостей (runtime/dev) и поддерживать её в `docs/tech/dependency-matrix.md`.
2. **Расширить авто-тесты сервиса**
   - Дополнить unit-тестами модули `apps/kiosk-agent/src/services/*`.
   - Настроить покрытие для `packages/device-obd` и `packages/device-thickness` без эмуляции данных.
   - Запланировать smoke-тесты для скриптов infra (проверка ключевых CLI-сценариев).
   - Ввести минимальные метрики покрытия и контролировать их в журнале.
3. **Нормализовать логирование**
   - Ввести единый формат JSON-логов в агенте (`apps/kiosk-agent/src/logging/`).
   - Добавить ротацию логов в `infra/scripts/service-watchdog.ps1`.
   - Определить уровни критичности сообщений и создать справочник в `docs/internal/logging-levels.md`.
   - Настроить алерты по ключевым ошибкам (email/локальный дашборд) и задокументировать процесс реагирования.
4. **Документация и наблюдаемость**
   - Описать процесс аварийного восстановления в `docs/tech/operations.md`.
   - Обновить диаграммы взаимодействия устройств (`docs/tech/architecture.md`).
   - Добавить чек-лист для сценариев DR-тестов (disaster recovery) с периодичностью выполнения.
   - Подготовить шаблоны отчётов для ретроспектив внутренних релизов.
5. **Инженерная гигиена**
   - Актуализировать `README.md` и `docs/internal/checklist.md` после внедрения изменений.
   - Закрепить правило проверки `npm run lint && npm test` в pre-commit хуках.
6. **Актуализация ролей и журналов**
   - Еженедельно сверять раздел «Организация и ответственность» и обновлять его при изменении ролей.
   - Поддерживать актуальность `docs/internal/checklist.md`, добавляя новые задачи по мере появления внутренних инициатив.
7. **Автоматизация и инфраструктура**
   - Разработать шаблон GitHub Actions/локальных задач для автоматизации линтов и тестов.
   - Подготовить сценарии резервного копирования конфигураций (`infra/kiosk/backup-*`).
   - Описать процедуру восстановления dev-окружения с нуля и поддерживать её в актуальном состоянии.
   - Внедрить регулярные проверки целостности резервных копий (test-restore) и фиксировать результаты.
   - Подготовить план миграции на обновлённые версии Node.js/TypeScript с оценкой рисков.
8. **Безопасность и соответствие требованиям**
   - Провести аудит прав доступа к локальным сервисам, зафиксировать результаты.
   - Установить политику смены паролей/ключей для внутренних сервисов и добавить напоминания в календарь.
   - Вести реестр уязвимостей и статусы их устранения.
9. **Управление знаниями**
   - Создать оглавление для `docs/` с кратким описанием каждого документа.
   - Настроить шаблон для быстрых заметок по исследованиям (интеграции, SDK) в `docs/internal/research-notes/`.
   - Ввести правило: любая новая внутренняя процедура сопровождается коротким how-to.
10. **Мониторинг и наблюдаемость**
   - Настроить минимальный набор алертов по ключевым метрикам (доступность агента, статус устройств).
   - Разработать дашборд для отслеживания внутренних метрик (lint/test, обновления зависимостей, аудит).
   - Задокументировать сценарии реагирования на алерты и график их проверки.
11. **Обучение и онбординг**
   - Подготовить internal onboarding-гайд для новых участников (даже если это будущие агенты/ИИ).
   - Создать серию внутренних воркшопов (видео/текст) по ключевым компонентам и хранить в `docs/internal/training/`.
   - Проводить ежегодную ревизию обучающих материалов и фиксировать обновления в журнале.

### Матрица задач по компонентам

| Компонент | Регулярные действия | Триггеры внеочередного обновления |
| --- | --- | --- |
| `apps/kiosk-frontend/` | Проверка lint-правил, актуализация зависимостей UI, документирование публичных компонентов | Появление новых страниц/виджетов, обновление дизайн-гайда |
| `apps/kiosk-agent/` | Пересмотр обработчиков ошибок, проверка watchdog-скриптов, аудит конфигурации режимов | Новые устройства, изменения протоколов платежей, обновление оборудования киоска |
| `packages/device-obd/` | Прогон self-check, анализ таймаутов, обновление справочника DTC | Новые модели авто, выявленные ошибки соединения, смена адаптера, обновления прошивок адаптера |
| `packages/device-thickness/` | Тестирование стабильности соединения, обновление схем измерений, логирование SDK-исключений | Обновление прошивки толщиномера, жалобы на нестабильность считывания, изменения SDK |
| `packages/report/` | Проверка шаблонов PDF/HTML, валидация локализации, тест печати | Изменение состава данных, новые требования партнёров |
| `packages/payments/` | Верификация ключей и токенов, проверка просроченных сертификатов | Смена PSP, новые тарифы, инциденты безопасности |
| `infra/scripts/` | Ревизия PowerShell-скриптов, проверка прав запуска, обновление документации по автозапуску | Переезд на новую версию ОС, изменение политик безопасности |
| `infra/monitoring/` | Поддержка конфигураций наблюдаемости | Новые требования к алертам, изменения SLA |
| `docs/` | Обновление технических и продуктовых документов, синхронизация с текущим состоянием | Итоги ревью, изменения архитектуры |
| `docs/internal/training/` | Обучающие материалы и воркшопы | Появление новых технологий, результаты аудита знаний |

## 3. Шаги автономного обновления

1. **Подготовка среды**
   - Синхронизировать инструкции: перечитать `.github/instructions/instructions.instructions.md`.
   - Проверить локальные версии Node.js и npm (`node -v`, `npm -v`).
   - Убедиться, что установлена версия TypeScript из `package.json` (на дату документа — `5.5.x`), чтобы исключить предупреждения линтера.
   - Актуализировать переменные окружения и локальные `.env` (удостовериться, что отсутствуют секреты в репозитории).
   - Провести быструю проверку состояния оборудования киоска (если тесты связаны с устройствами) и зафиксировать наблюдения в журнале.
2. **Анализ состояния**
   - Выполнить статический анализ: `npm run lint`.
   - Запустить тесты (по мере появления) `npm test`.
   - Минимум раз в месяц (или при существенном обновлении) сформировать отчёт зависимостей: `npm run report:dependencies`.
   - При ручной диагностике устройств запустить OBD self-check CLI (`apps/kiosk-agent/src/devices/obd/runSelfCheck.ts`) для фиксации JSONL-лога.
   - Проверить свежесть журнала self-check через watchdog (`infra/scripts/service-watchdog.ps1`) и зафиксировать вывод.
   - Сформировать оперативную сводку по self-check логам (`infra/scripts/self-check-report.cjs --json`) при анализе трендов.
   - При необходимости оценить объём и возраст записей журнала через `infra/scripts/self-check-maintenance.cjs --dry-run`.
   - Обновить журнал `docs/internal/autonomous-updates/log.md` (раздел «Диагностика»).
   - Проверить результаты последних аудитов безопасности и добавить follow-up задачи при необходимости.
   - Зафиксировать текущие версии ключевых зависимостей (Node.js, npm, сторонние SDK).
3. **Реализация внутренних изменений**
   - Вносить правки в пределах компонентов из таблицы выше.
   - Соблюдать запрет на изменение пользовательских сценариев и визуального контента.
   - При необходимости запрашивать у владельца подтверждение на новые инициативы и фиксировать его в журнале.
   - Вести черновик изменений (changelog) в `docs/internal/autonomous-updates/drafts/` до публикации финальной версии, используя шаблон `template-operational-plan.md` для единообразия.
   - При работе с драйверами фиксировать используемое оборудование, прошивки и возможные ограничения.
4. **Верификация**
   - Повторно прогнать линтеры и тесты.
   - Сравнить перечень задач с `docs/internal/checklist.md`.
   - Выполнить точечные проверки затронутых скриптов/процедур вручную (если автоматизация отсутствует).
   - Запустить `infra/scripts/service-watchdog.ps1` с актуальным порогом, убедиться, что статус соответствует ожиданию.
   - Дополнительно сверить агрегированную статистику (`infra/scripts/self-check-report.cjs`) перед закрытием работ.
   - При подтверждённой необходимости выполнить `infra/scripts/self-check-maintenance.cjs --backup` для обрезки устаревших записей.
   - Подготовить краткое резюме о достигнутых улучшениях и потенциальных рисках.
5. **Документирование**
   - Добавить заметки в журнал и обновить этот README при появлении новых шагов или зависимостей.
   - При изменениях в обучающих активностях синхронизировать `docs/internal/training/schedule.md` и соответствующие материалы.
   - Формировать ежемесячное резюме внутренних активностей и направлять его владельцу (см. чек-лист).
   - Для подготовки резюме использовать шаблон `templates/monthly-summary-template.md`, прикрепляя ссылки на ключевые артефакты.
   - Сохранять отчёты по зависимостям в `docs/internal/autonomous-updates/reports/` и ссылаться на них в `log.md`.
   - Синхронизировать изменения с основным `README.md`, если появились новые обязательные процедуры.
   - Обновить релевантные диаграммы/схемы, если архитектурные решения претерпели изменения.

## 4. Инструменты и расширения

| Инструмент / Расширение | Назначение | Команда установки (PowerShell) | Ссылка |
| --- | --- | --- | --- |
| ESLint (CLI) | Статический анализ JS/TS | ```powershell
npm install --save-dev eslint
``` | https://eslint.org/
| Prettier | Форматирование | ```powershell
npm install --save-dev prettier
``` | https://prettier.io/
| Jest | Unit-тесты (Node.js) | ```powershell
npm install --save-dev jest @types/jest ts-jest
``` | https://jestjs.io/
| VS Code ESLint Extension | Интеграция линтера | ```powershell
code --install-extension dbaeumer.vscode-eslint
``` | https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint
| VS Code Thunder Client | Локальные запросы к агенту | ```powershell
code --install-extension rangav.vscode-thunder-client
``` | https://marketplace.visualstudio.com/items?itemName=rangav.vscode-thunder-client
| PowerShell Script Analyzer | Анализ скриптов в `infra/` | ```powershell
Install-Module -Name PSScriptAnalyzer -Scope CurrentUser
``` | https://github.com/PowerShell/PSScriptAnalyzer
| TypeDoc | Генерация технической документации по TS-пакетам | ```powershell
npm install --save-dev typedoc
``` | https://typedoc.org/
| Commitlint CLI | Контроль форматирования сообщений коммитов | ```powershell
npm install --save-dev @commitlint/{config-conventional,cli}
``` | https://commitlint.js.org/
| Markdownlint CLI | Проверка качества markdown-документов | ```powershell
npm install --save-dev markdownlint-cli
``` | https://github.com/DavidAnson/markdownlint-cli
| Spectral | Линтер OpenAPI/AsyncAPI (для будущих интеграций) | ```powershell
npm install --save-dev @stoplight/spectral-cli
``` | https://github.com/stoplightio/spectral
| VS Code Markdownlint Extension | Удобства правки документации | ```powershell
code --install-extension DavidAnson.vscode-markdownlint
``` | https://marketplace.visualstudio.com/items?itemName=DavidAnson.vscode-markdownlint
| VS Code GitLens | Просмотр истории коммитов и blame | ```powershell
code --install-extension eamodio.gitlens
``` | https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens
| npm run report:dependencies | Сводный отчёт по `npm outdated` + `npm audit --production` | (встроено в `package.json`) | `docs/internal/autonomous-updates/reports/README.md` |
| Self-check logger | JSONL журнал проверок устройств (по умолчанию `artifacts/logs/selfcheck/self-check.log.jsonl`) | `SELF_CHECK_LOG_DIR=<путь>` (опционально) | `apps/kiosk-agent/src/selfcheck/` |
| Watchdog self-check | Контроль свежести JSONL-журнала и статуса последнего self-check | ```powershell
pwsh -NoProfile -ExecutionPolicy Bypass -File infra/scripts/service-watchdog.ps1 -MaxAgeMinutes 60
``` | `infra/scripts/service-watchdog.ps1` |
| Self-check maintenance | Ротация и очистка журнала self-check по возрасту записей | ```powershell
node infra/scripts/self-check-maintenance.cjs --max-age-days 30 --backup
``` | `infra/scripts/self-check-maintenance.cjs` |
| Self-check report | Агрегированная сводка по записям self-check (статусы, компоненты, свежесть) | ```powershell
node infra/scripts/self-check-report.cjs --json
``` | `infra/scripts/self-check-report.cjs` |
| Self-check daily orchestrator | Последовательный запуск очистки → watchdog → отчёта с единым кодом возврата | ```powershell
pwsh -NoProfile -File infra/scripts/self-check-daily.ps1 -RetentionDays 30 -MaxAgeMinutes 60 -SummaryFile artifacts/logs/selfcheck/daily-summary.jsonl
``` | `infra/scripts/self-check-daily.ps1` |
| Self-check trigger (OBD) | Инициирует реальный OBD self-check через `runSelfCheck.ts` | ```powershell
pwsh -NoProfile -File infra/scripts/self-check-trigger.ps1 -Port COM3 -Attempts 3 -AgentEnv QA -LogDir artifacts/logs/selfcheck
``` | `infra/scripts/self-check-trigger.ps1` |

> Команды рассчитаны на оболочку `pwsh.exe` из корня репозитория.

### Автоматизация ежедневного self-check

- **Цель:** держать журнал self-check свежим, автоматически удалять устаревшие записи и получать агрегированную сводку.
- **Рекомендуемое расписание:** ежедневно в 07:30 локального времени до открытия киоска.
- **Команда:** см. таблицу выше; при запуске по расписанию добавьте флаги `-Quiet`, `-EmitJson` и `-SummaryFile artifacts/logs/selfcheck/daily-summary.jsonl`.
- **Task Scheduler (пример):**

```powershell
SCHTASKS /Create /TN "Kiosk Self-Check Daily" /SC DAILY /ST 07:30 /RL HIGHEST /TR "pwsh -NoProfile -ExecutionPolicy Bypass -File `"C:\\kiosk\\repo\\infra\\scripts\\self-check-daily.ps1`" -Quiet -EmitJson -SummaryFile `"C:\\kiosk\\repo\\artifacts\\logs\\selfcheck\\daily-summary.jsonl`""
```

- **Уведомления:** если скрипт завершился с кодом `1` (предупреждение) или `2`+ (ошибка), эскалировать владельцу и инициировать ручной self-check (`runSelfCheck.ts`).
- **Журналирование:** итоговый JSON автоматически дописывается в файл, указанный через `-SummaryFile` (рекомендуется `artifacts/logs/selfcheck/daily-summary.jsonl`).

### Расписание запуска OBD self-check

- **Цель:** обеспечить свежую запись в журнале до запуска дневного оркестратора.
- **Рекомендуемое время:** ежедневно в 07:15 локального времени (до `self-check-daily.ps1`).
- **Команда:**

```powershell
SCHTASKS /Create /TN "Kiosk OBD Self-Check" /SC DAILY /ST 07:15 /RL HIGHEST /TR "pwsh -NoProfile -ExecutionPolicy Bypass -File `"C:\\kiosk\\repo\\infra\\scripts\\self-check-trigger.ps1`" -Port COM3 -Attempts 3 -AgentEnv QA -LogDir `"C:\\kiosk\\repo\\artifacts\\logs\\selfcheck`""
```

- **Параметры:**
   - `-Port` — фактический COM-порт адаптера (актуализировать, если оборудование меняется).
   - `-Attempts` и `-DelayMs` — подстроить под требования диагностики (по умолчанию 3 и 500 мс).
   - `-AgentEnv` — режим (`DEV`/`QA`/`PROD`) для корректного логирования.
   - `-LogDir` — путь к каталогу для JSONL-журнала (каталог создаётся автоматически).
- **Инциденты:** при коде выхода `2` — неуспешная диагностика, требуется повтор и разбор логов; при коде `3+` — техническая ошибка запуска, уведомить владельца.

## 5. Календарь и контрольные точки

| Периодичность | Контрольная точка | Ответственные материалы | Ожидаемый результат |
| --- | --- | --- | --- |
| Каждую неделю | Проверка журнала `log.md` и актуализация статуса задач | Журнал внутренних обновлений, ссылки на PR | Все записи имеют актуальный статус, добавлены ссылки на артефакты |
| Каждые 2 недели | Ревизия секций README и чек-листа | `docs/internal/checklist.md`, текущий README | Подтверждено соответствие инструкциям и внутренним планам |
| Ежемесячно | Отчёт по зависимостям и безопасности | `npm outdated`, `npm audit --production` (при необходимости ручного запуска) | Составлен отчёт и приложен к журналу |
| Ежемесячно | Сводка зависимостей (скрипт) | `npm run report:dependencies`, `reports/` | Файл отчёта создан и ссылка добавлена в журнал |
| Ежеквартально | Ретроспектива инфраструктурных скриптов | `infra/scripts/`, PowerShell-скрипты | Обновлены комментарии, устранены предупреждения анализаторов |
| Ежеквартально | Ревизия обучающих материалов | `docs/internal/training/`, `training/schedule.md` | Обновлены расписание, записи и конспекты, KPI обучения ≥ 100% |
| По событию | Инцидент или обновление оборудования | Документация разделов `apps/`, `packages/`, `infra/` | Сформирован план внеочередных внутренних обновлений |
| Ежедневно (при активных работах) | Фиксация прогресса в черновике `docs/internal/autonomous-updates/drafts/` | Чек-лист задач, журнал | Прозрачность изменений и их готовности |
| Раз в полгода | Аудит ролей и ответственности | Раздел «Организация и ответственность», журнал | Подтверждены актуальные контакты и полномочия |
| По завершении крупных инициатив | Постмортем | Журнал, отчёт по инициативе | Извлечены уроки и дополнен раздел «Непрерывное улучшение» |

## 6. Протокол ведения журнала

1. При каждом запуске внутренних работ добавляйте новую строку в `docs/internal/autonomous-updates/log.md` с датой, названием задачи, компонентом и статусом (`planned`, `in_progress`, `done`).
2. В колонке «Ответственный» фиксируйте исполнителя или команду (допускается роль/alias).
3. В колонке «Комментарии» размещайте ссылки на артефакты: выводы `npm audit`, логи линтера, номера PR, документы с результатами проверки.
4. При закрытии задачи переводите статус в `done`, обновляйте дату (при необходимости) и кратко описывайте фактический результат.
5. Если задача повторяется циклично, добавляйте новую запись с актуальной датой, сохраняя историю прошлых выполнений.

## 7. Связанные документы

- Чек-лист: `docs/internal/checklist.md`
- Главный README проекта: `README.md`
- Инструкции: `.github/instructions/instructions.instructions.md`
- Журнал внутренних обновлений: `docs/internal/autonomous-updates/log.md`
- Черновики инициатив: `docs/internal/autonomous-updates/drafts/`
- Шаблоны отчётности: `docs/internal/autonomous-updates/templates/`
- Отчёты по зависимостям: `docs/internal/autonomous-updates/reports/`
- Обучающие материалы: `docs/internal/training/README.md`
- Исследовательские заметки: `docs/internal/research-notes/README.md`
- Реестр договорённостей: `docs/internal/notes/README.md`
- Backlog улучшений: `docs/internal/improvement-backlog.md`

## 8. Организация и ответственность

| Роль | Ответственность | Основные артефакты |
| --- | --- | --- |
| Владелец проекта | Формулирует цели, утверждает внутренние планы, принимает результаты | Задачи backlog, отметки в `log.md`, резолюции в PR |
| GitHub Copilot (ИИ) | Исполняет внутренние обновления, поддерживает документацию, ведёт журнал | Настоящий README, `docs/internal/checklist.md`, коммиты |
| Наблюдатели/аудиторы | Периодически проверяют соответствие инструкциям и журналу | Итоги ревизий, отчёты аудита |

- Все внутренние действия выполняются ИИ под руководством владельца и фиксируются в журнале, чтобы сохранить прозрачность и воспроизводимость процессов.
- Коммуникации и решения документируются внутри репозитория; внешние каналы не используются.

Все изменения по этому плану должны сопровождаться ссылками на соответствующие задачи и коммиты, чтобы сохранить прозрачность и контроль.

## 9. Управление рисками и инцидентами

| Риск | Вероятность | Влияние | План предотвращения | План реагирования |
| --- | --- | --- | --- | --- |
| Сбой адаптера OBD во время диагностики | Средняя | Высокое | Регулярный self-check, проверка прошивки перед релизами | Документированная процедура повторного подключения, фиксация события в журнале |
| Потеря связи с толщиномером | Средняя | Среднее | Тестирование BLE/Serial каналов, обновление инструкций подключения | Немедленное информирование владельца, запись в лог, повторная проверка устройства |
| Ошибки при обновлении скриптов инфраструктуры | Низкая | Высокое | Code review, тестовые прогоны на staging-среде | Откат изменений, восстановление из резервной копии, ретроспектива |
| Просроченные сертификаты/ключи | Средняя | Высокое | Календарь напоминаний, ежемесячный аудит | Срочное продление, документирование решения |
| Неконсистентность документации | Средняя | Среднее | Еженедельные сверки, чек-лист ревизии | Срочная корректировка, комментарий в журнале |

- Для каждого зарегистрированного инцидента необходимо заполнить форму отчёта (описание, дата, воздействия, принятые меры) и приложить ссылку в `log.md`.
- Ежеквартально проводить анализ рисков, обновляя вероятности и планы реагирования.
- При появлении новых рисков владельцу направляется уведомление и предлагается план профилактики.

## 10. Метрики и индикаторы эффективности

- **Скорость обработки внутренних задач:** время от постановки до фиксации статуса `done` (цель — ≤ 5 рабочих дней).
- **Гигиена репозитория:** количество линтер-ошибок на PR (цель — 0). Нарушение фиксируется в журнале.
- **Актуальность документации:** процент разделов README/чек-листа, прошедших ревизию за последние 30 дней (цель — ≥ 90%).
- **Стабильность скриптов:** число успешных прогонов служебных PowerShell-скриптов без ошибок (цель — 100%).
- **Реагирование на уязвимости:** время между публикацией отчёта `npm audit` и регистрацией плана действий (цель — ≤ 2 дня).
- **Покрытие обучающих материалов:** доля ключевых компонентов, для которых есть актуальные training-гайды (цель — 100%).
- **Готовность резервных копий:** количество успешных тестовых восстановлений за квартал (цель — ≥ 1 на каждый тип бэкапа).
- **Зрелость мониторинга:** % критичных алертов, имеющих документированный план реагирования (цель — 100%).

> Метрики фиксируются в ежемесячном резюме. Отклонения сопровождаются описанием первопричин и планом коррекции.

## 11. Дорожная карта автоматизации и CI/CD

1. **Краткосрочно (0–1 месяц)**
   - Подготовить шаблон PowerShell-задачи для запуска линтов и тестов при каждом обновлении.
   - Создать локальный скрипт для проверки целостности конфигураций киоска.
   - Настроить Markdownlint/Commitlint в pre-commit хуках.
2. **Среднесрочно (1–3 месяца)**
   - Развернуть локальный раннер CI (например, GitHub Actions self-hosted) для автопроверок.
   - Автоматизировать генерацию отчётов TypeDoc/Markdownlint и прикрепление их к журналу.
   - Внедрить автосборку статической документации и её публикацию в локальный портал.
3. **Долгосрочно (3+ месяцев)**
   - Внедрить автоматизированные smoke-тесты для коммуникаций с устройствами (при наличии тестового стенда).
   - Настроить расписание ночных проверок зависимостей и уведомления при отклонениях.
   - Изучить возможность внедрения канареечных обновлений для агентов и скриптов.

## 12. Коммуникации и синхронизация

- **Еженедельный статус:** короткий отчёт владельцу (активные задачи, блокеры, завершённые работы).
- **Ревизии документации:** встреча ИИ с владельцем раз в 2 недели для утверждения обновлений ключевых разделов.
- **Инцидентные уведомления:** немедленное сообщение владельцу с ссылкой на запись в журнале и предложением действий.
- **Архивация обсуждений:** каждая договорённость фиксируется в PR/коммите или отдельной заметке в `docs/internal/notes/`.
- **Обучающие сессии:** ежеквартальный прогон ключевых процедур (self-check, отчётность) с фиксацией выводов.
- **Мониторинг обратной связи:** формировать список предложений владельца и отслеживать их реализацию.

## 13. Непрерывное улучшение

- Вести backlog улучшений в `docs/internal/improvement-backlog.md` с приоритизацией (P0–P3).
- Раз в квартал проводить ретроспективу внутренних процессов: что сработало, что мешало, какие эксперименты попробовать.
- Включать в план обучения краткие сессии по новым инструментам/SDK, фиксируя конспект в `docs/internal/research-notes/`.
- Создать шаблон «оперативного плана» для крупных инициатив (контекст, цели, критерии успеха, риски, сроки).
- Проводить анализ реализованных улучшений и обновлять критерии оценки (метрики, цикл внедрения).

## 14. Глоссарий внутренних терминов

- **DEV/QA/PROD** — флаг режима работы приложения; определяет доступность заглушек и тестовых функций.
- **Self-check** — автоматизированный тест устройств (OBD, толщиномер), запускаемый агентом для проверки готовности.
- **Watchdog** — скрипт, контролирующий состояние процессов и перезапускающий их при сбоях.
- **DR-тест** — проверка процедур восстановления после сбоя (Disaster Recovery Test).
- **Planned task** — внутренняя задача, зарегистрированная в журнале, ожидающая исполнения.
- **Internal release** — завершённый пакет внутренних изменений, не влияющий на UX клиентов, но повышающий стабильность.
- **Kiosk profile** — совокупность настроек Windows-киоска (автологин, запуск приложений, блокировки).
- **Incident playbook** — документированная последовательность действий при конкретном инциденте.
- **Training cycle** — расписание внутренних обучающих активностей (воркшопы, ревью, Q&A).

Глоссарий дополняется при появлении новых терминов в документации или журнале, чтобы поддерживать единое понимание процессов.
