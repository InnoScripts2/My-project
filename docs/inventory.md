# Инвентаризация активов (Этап 0)

## Сводная таблица
| Источник | Языки | Лицензия | Назначение | Ключевые артефакты | Тесты | Первичные действия |
|----------|--------|----------|-------------|--------------------|-------|--------------------|
| `блок 1/` | Python | GPL-2.0-only (pyobd2) | Библиотеки и скрипты OBD-II (`pyOBD`, модуль `obd/`), вспомогательные утилиты | `obd_io.py`, `obd/elm327.py`, `pyproject.toml`, `requirements/` | Нет явных автоматических тестов | Проверить совместимость GPL с итоговым продуктом, выделить ядро для переноса в `libs/python`, удалить устаревшие скрипты |
| `блок 2/` | Java, Kotlin | Apache-2.0 (Android-BluetoothSPP) | Android Bluetooth SPP библиотека и демо | `library/src/`, `app/src/`, `gradle`-конфиги | Нет | Выделить классы Bluetooth SPP для повторного использования, отказаться от устаревших демо |
| `блок 3/` | C# | Custom (ExpressOBD, проверить notice) | WinForms приложение ExpressOBD | `ExpressOBD.csproj`, `MainForm.cs`, `Properties/` | Нет | Извлечь логику UI и последовательность команд, сопоставить с `блок 4` |
| `блок 4/` | C# (.NET 4.8.1) | Proprietary (требуется письменное разрешение автора) | Основное Windows-приложение Generic Diagnostic Tool (PassThru J2534) | `Passthru.csproj`, `lib/Interface/J2534.cs`, `lib/Protocol/*.cs`, CSV баз DTC | Нет | Задокументировать последовательности J2534, выделить переносимый код, спроектировать перенос в C++/Kotlin, соблюсти условия лицензии |
| `блок 5/` | Rust | MPL-2.0 | Библиотека для работы с CAN/OBD (через `serialport`) | `Cargo.toml`, `src/`, `examples/`, `tests/` | Есть юнит-тесты и примеры | Оценить пригодность модулей, решить: обёртка в C++ или прямое использование через FFI |
| `блок 6/` | Java, Kotlin, C | MIT (предполагается, требуется подтверждение) | Кроссплатформенный сериал-порт стек + примеры | `serialport/`, `javademo/`, `kotlindemo/`, `app/` | Нет | Выделить ядро serialport для JNI-обёртки, удалить дублирующие демо |
| `apps-unified/android-kiosk/` | Kotlin, Java | Приватный (наш) | Целевое Android-приложение киоска | `app/src/`, `README.md`, руководства | Нет | Согласовать структуру модулей, подготовить интеграцию JNI/Python |
| `packages/`, `apps/kiosk-*`, `apps-unified/kiosk-agent/` | TypeScript | MIT (наши пакеты) | Устаревшие Node.js сервисы | API агента, общие пакеты | Unit-тесты в `apps/kiosk-agent` | Поставить в архив, перенести артефакты (документы, ассеты), удалить код |
| `блок 6/serialport/` (C) | C | MIT (проверить в исходниках) | Базовые реализации сериал-порта | `jni/src/`, заголовки | Нет | Перенести в `libs/cpp`, унифицировать разделение платформ |

## Детали по ключевым источникам

### `блок 1/`
- Включает переработку проекта `pyOBD` с модульной структурой `obd/` (команды, протоколы, асинхронный драйвер).
- `pyproject.toml` фиксирует зависимости; `requirements/` содержит зафиксированные версии (`pyserial`, `requests` и др.).
- Есть медиа-файлы (иконки, изображения) для документации.
- Требуется провести аудит лицензий (оригинальный проект MIT) и подготовить план адаптации под `libs/python` (структура пакетов, тесты, удаление неиспользуемых UI-компонентов).

### `блок 2/`
- Библиотека Bluetooth SPP (`library/`) и Android-пример (`app/`); фреймворк предназначен для упрощённой работы с SPP.
- README подтверждает отсутствие поддержки; необходимо выбрать жизнеспособные части (управление соединениями, обработка буфера) и адаптировать под наш Android-проект.
- Следует перенести только код, который можно поддерживать (например, `BluetoothSPP.java`), и переработать под современные API (`BluetoothAdapter`, `BluetoothManager`).

### `блок 3/`
- WinForms-приложение ExpressOBD со схемой работы с адаптером ELM327.
- Использует структуру похожую на `блок 4`, но с упрощённым UI; пригодно как источник примеров взаимодействия и UX.
- План: зафиксировать сценарии (подключение, чтение, очистка DTC), синхронизировать с данными из `блок 4`.

### `блок 4/`
- Проект `Generic Diagnostic Tool` включает широкую библиотеку форм и протоколов: `lib/Interface` (чтение PassThru, выбор устройств), `lib/Protocol` (UDS 0x10, 0x27 и др.), CSV базы DTC по брендам.
- Проект использует `DarkUI` и unsafe-блоки для доступа к устройствам.
- Необходимо:
  - Задокументировать последовательности команд и структуры данных (J2534, CAN, UDS).
  - Выделить логические уровни: соединение, протокол, UI.
  - Подготовить задачи по портированию: драйверы → C++, UI → Kotlin, справочные базы → общий формат (CSV/JSON).

### `блок 5/`
- Rust-библиотека с поддержкой CAN и серийного порта; содержит примеры и тесты.
- Проверить совместимость лицензии (например, MIT/Apache) и целесообразность: либо использовать как эталон для C++, либо оставить для Python-инструментов через FFI.
- Требуется оценка трудозатрат на поддержку Rust в Android-пайплайне.

### `блок 6/`
- Многоязычный проект с примерами (Java/Kotlin) и нативным слоем (`serialport/`), рассчитанным на Android.
- Важно выделить C-часть (`serialport/src/main/cpp`) и JNI-интерфейсы; их предстоит перенести в `libs/cpp` и адаптировать под новую архитектуру.
- Документация (`docs/`) может содержать полезные инструкции.

### Android-проект (`apps-unified/android-kiosk/`)
- Содержит текущий каркас киоска, включая руководства и чек-листы.
- Необходимо привести структуру модулей к целевой архитектуре (UI, домен, интеграция с JNI и Python).
- Часть документации описывает прошлые интеграции; нужно обновить с учётом новой архитектуры.

### Устаревший Node.js-стек
- `apps/kiosk-agent`, `apps/kiosk`, `apps-unified/kiosk-agent` и связанные `packages/` содержат API-агент, фронтенд и общие модули на TypeScript.
- План: извлечь полезные конфиги, окружения, документы; остальной код удалить после миграции.

## Следующие шаги (Этап 0)
1. Дополнить таблицу сведениями о лицензиях, зависимостях и статусе тестов для каждого источника.
2. Для `блок 4` подготовить отдельный документ с последовательностями J2534, описанием используемых CSV баз DTC и идентификацией классов, которые нужно портировать.
3. Определить, какие Python- и C++-модули уже имеют тесты, и зафиксировать их расположение.
4. На основе инвентаризации составить список кандидатов на немедленное удаление или архивацию.
